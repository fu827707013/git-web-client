# Git Web 管理工具需求说明书

## 1. 项目概述

**项目名称**：Git Web 管理工具  
**项目定位**：面向个人开发者的轻量级本地 Git 仓库管理工具  
**部署方式**：本地部署（Web + API 一体化）  
**架构模式**：B/S 架构，前后端分离

---

## 2. 技术栈

### 2.1 前端技术
- **框架**：Vue 3.3+ (Composition API)
- **UI 组件库**：Vuetify 3.0+
- **HTTP 客户端**：Axios
- **构建工具**：Vite
- **包管理器**：npm

### 2.2 后端技术
- **框架**：.NET 10 (ASP.NET Core Web API)
- **Git 操作库**：LibGit2Sharp
- **序列化**：System.Text.Json
- **C# 版本**：C# 12+

### 2.3 开发环境
- Node.js 18+
- .NET 10 SDK
- Git 2.40+

---

## 3. 核心功能需求

### 3.1 仓库管理模块

#### 3.1.1 加载本地仓库
- **功能描述**：用户输入本地文件夹路径，系统验证并加载 Git 仓库
- **交互流程**：
  1. 前端提供路径输入框（支持粘贴、拖拽文件夹）
  2. 调用 API 验证路径有效性及 Git 仓库合法性
  3. 成功后将仓库信息存入前端状态管理
  4. 支持记忆最近使用的 5 个仓库路径

#### 3.1.2 仓库状态查看
- **功能描述**：显示当前仓库基本信息
- **显示内容**：
  - 当前分支
  - 远程仓库地址
  - 未提交文件数
  - 未推送提交数

---

### 3.2 Git 操作模块

#### 3.2.1 Git Pull
- **功能描述**：从远程仓库拉取最新代码
- **交互流程**：
  1. 用户点击 "Pull" 按钮
  2. 前端调用 API 执行 pull 操作
  3. 实时显示操作进度和结果
  4. 支持配置拉取策略（rebase/merge）

#### 3.2.2 Git Push
- **功能描述**：将本地提交推送到远程仓库
- **交互流程**：
  1. 用户点击 "Push" 按钮
  2. 如有必要，弹出认证对话框（首次使用）
  3. 执行 push 并返回结果

#### 3.2.3 Git Commit
- **功能描述**：提交本地变更
- **交互流程**：
  1. 显示当前所有变更文件列表（新增、修改、删除）
  2. 用户勾选要提交的文件
  3. 输入提交信息
  4. 执行 commit 操作

---

### 3.3 提交记录模块

#### 3.3.1 提交历史查看
- **功能描述**：分页显示仓库的提交记录
- **显示字段**：
  - Commit Hash（缩略） 
  - 作者名称
  - 提交日期（相对时间）
  - 提交消息
  - 变更文件数量
- **交互功能**：
  - 支持按关键词搜索提交消息
  - 支持按作者筛选
  - 每页显示 20 条，支持滚动加载更多

---

### 3.4 文件下载模块

#### 3.4.1 选择性下载
- **功能描述**：选中某次提交，下载该次提交涉及的所有文件
- **核心逻辑**：
  1. 用户点击提交记录上的 "下载文件" 按钮
  2. 前端调用 API 获取该提交的所有变更文件列表
  3. 按时间顺序（从旧到新）批量下载文件
  4. **同名文件自动覆盖**，保持目录结构
  5. 下载到浏览器默认下载目录

#### 3.4.2 批量下载
- **功能描述**：支持多选提交记录，批量下载所有相关文件
- **处理规则**：
  - 按提交时间排序（从早到晚）
  - 后下载的文件自动覆盖先下载的同名文件
  - 最终保留最新版本的文件

---

## 4. 版本规划

**v1.0.0**
- 实现基础功能
- 支持单仓库管理

---

参考加载记录，可以通过api保存在后端，使用一个json文件记录最近使用的仓库路径